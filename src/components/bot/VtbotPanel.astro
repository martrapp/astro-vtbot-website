---
import snail from './mono-snail.url?raw';
import hslider from './mono-h-sliders.url?raw';
import vslider from './mono-v-sliders.url?raw';
import off from './mono-off.url?raw';
import sbs from './mono-side-by-side.url?raw';
---

<div id="vtbot-ui-panel">
	<div id="vtbot-ui-messages" style="view-transition-name: vtbot-div-messages">
		<h4>Welcome &hellip;</h4>
		<p>&hellip; to the <b>Engine Room</b> deep down at the bottom of the <b>Bag of Tricks!</b></p>
		<p>
			<b>Select a mode</b> from <code>Bypass</code> (= do nothing), <code>Slow Motion</code>, <code
				>Full Manual Control</code
			> or <code>Side-by-side Comparison</code>.
		</p>
		<p style="margin-bottom:0">Then click a link on your page to <b>start a view transition</b>.</p>
	</div>

	<div id="vtbot-ui-modi" style="view-transition-name: vtbot-div-modi">
		<h4>Select Mode:</h4>

		<ul>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-bypass" checked /><label
					for="vtbot-m-bypass"
					><span style="display: inline-block; width:6.7em">Bypass</span>
					<img style="transform: scale(1.5) translateY(1px)" src={off} /></label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-slow-motion" /><label
					for="vtbot-m-slow-motion"
					><span style="display: inline-block; width:7em">Slow Motion</span><img
						style="transform: scale(1.5)"
						src={snail}
					/></label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-control" /><label for="vtbot-m-control"
					><span style="display: inline-block; width:6.7em">Full Control</span>
					<img class="horizontal" style="transform: scale(1.5)" src={hslider} /><img
						class="vertical"
						style="transform: scale(1.5)"
						src={vslider}
					/></label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-compare" /><label for="vtbot-m-compare"
					><span style="display: inline-block; width:7em">Side-by-side</span><img
						style="transform: scale(1.5)"
						src={sbs}
					/></label
				>
			</li>
		</ul>
	</div>
	<div id="vtbot-ui-slow-motion" style="view-transition-name: vtbot-div-slo-mo">
		<h4>Slow Motion:</h4>
		<label for="vtbot-ui-slo-mo">Stretch Factor: <span id="vtbot-ui-tsf">1.0</span></label><br />
		<input
			id="vtbot-ui-slo-mo"
			data-vtbot-slow-motion="1.0"
			type="range"
			min="0"
			max="2000"
			value="100"
		/>
	</div>
	<div id="vtbot-ui-control" style="view-transition-name: vtbot-div-control">
		<h4>Full Manual Control:</h4>
		<label for="vtbot-ui-controller">Progress:</label><br />
		<input type="range" id="vtbot-ui-controller" min="0" max="100" value="0" />
		<div style="display:flex; justify-content: space-between">
			<span>0%</span><span>100%</span>
		</div>
	</div>
	<div id="vtbot-ui-names" style="view-transition-name: vtbot-div-names">
		<h4>View transition names:</h4>
		<ol>
			<li>Name 1</li>
			<li>Name 2</li>
			<li class="left">Name 3</li>
			<li class="right selected">Name 2</li>
			<li class="left right">Name 3</li>
			<li>Name 2</li>
		</ol>
	</div>

	<div id="vtbot-ui-info" style="view-transition-name: vtbot-div-info">
		<h4>Info:</h4>
		Selector: egal
	</div>

	<div id="vtbot-ui-filter" style="view-transition-name: vtbot-div-filter">
		<h4>Filter Names:</h4>
		<ul>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-all" checked /><label for="vtbot-c-all"
					>Show all names</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-left" /><label for="vtbot-c-left"
					>Only on the left</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-right" /><label for="vtbot-c-right"
					>Only on the right</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-both" /><label for="vtbot-c-both"
					>On both pages</label
				>
			</li>
		</ul>
		<form style="view-transition-name: narrow">
			<label for="narrow">Narrow to:</label><br /><input
				id="narrow"
				type="text"
				placeholder="Fragment"
			/>
		</form>
		<button>Reset</button>
	</div>
	<div id="vtbot-ui-selectors" style="view-transition-name: vtbot-div-selectors" class="hidden">
		<h4>Left side</h4>
		<p>(No element)</p>
		<hr />
		<h4>Right side</h4>
		<p>(No element)</p>
	</div>
</div>
<button
	id="vtbot-ui-mode"
	style="view-transition-name: vtbot-button-mode"
	onclick="document.querySelector('#vtbot-main-frame').contentDocument.documentElement.style.colorScheme = (document.documentElement.style.colorScheme=document.documentElement.style.colorScheme==='dark'?'light':'dark')"
	>â—‘</button
>
<button id="vtbot-ui-turn" style="view-transition-name: vtbot-button-turn">â‡²</button>
<button
	id="vtbot-ui-close"
	onclick="window.location.reload()"
	style="view-transition-name: vtbot-button-close">ðŸ—™</button
>
<style is:inline>
	:root {
		transition: color 1s;
	}
	#vtbot-ui-panel ~ button {
		border-radius: 6px;
		border: 0;
		margin: 0;
		position: fixed;
		color: white;
		background-color: darkolivegreen;
	}
	#vtbot-ui-panel ~ #vtbot-ui-close {
		padding-bottom: 4pt;
		cursor: pointer;
		right: 11px;
		background-color: darkgoldenrod;
	}
	#vtbot-ui-turn {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 40px;
		color: white;
	}

	#vtbot-ui-mode {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 67px;
		color: white;
	}

	#vtbot-ui-panel > div {
		padding: 8px;
		margin: 4px;
		border: 1px solid #888;
		min-width: 140px;
	}
	#vtbot-ui-messages {
		min-height: 120px;
	}
	:root:not(.vtbot-ui-column) #vtbot-ui-panel div {
		min-height: 160px;
	}
	#vtbot-ui-panel div.hidden {
		display: none;
	}

	#vtbot-ui-messages {
		overflow-y: auto;
	}
	#vtbot-ui-filter {
		position: relative;
	}
	#vtbot-ui-filter button {
		cursor: pointer;
		padding-bottom: 3pt;
		border: 1px solid #888;
		margin: 0;
		position: absolute;
		top: 0;
		right: 0;
		border-bottom-left-radius: 6px;
	}

	#vtbot-ui-names {
		display: flex;
		flex-direction: column;
	}
	#vtbot-ui-names ol {
		padding-right: 8px;
		padding-left: 0px;
		margin-right: 8px;
		margin-left: 0px;
		overflow-y: auto;
		width: calc(100% - 8px);
		flex-grow: 1;
		list-style-type: none;
	}
	#vtbot-ui-names ol li {
		cursor: pointer;
		padding: 2pt 8pt;
		border-left: 8px solid transparent;
		border-right: 8px solid transparent;
	}
	#vtbot-ui-names ol li.left {
		border-left: 8px solid darkolivegreen;
	}
	#vtbot-ui-names ol li.leftHidden {
		border-left: 8px solid darkgoldenrod;
	}
	#vtbot-ui-names ol li.right {
		border-right: 8px solid darkolivegreen;
	}
	#vtbot-ui-names ol li.rightHidden {
		border-right: 8px solid darkgoldenrod;
	}
	#vtbot-ui-names ol li.selected {
		background-color: #859b5f66;
	}

	#vtbot-ui-filter ul {
		list-style-type: none;
		padding-left: 0;
	}
	#vtbot-ui-filter ul label {
		margin-left: 8px;
		margin-right: 8px;
	}
	#vtbot-ui-filter > label {
		margin-left: 5px;
	}
	#vtbot-ui-filter input[type='text'] {
		margin-top: 5px;
		width: 10em;
	}

	#vtbot-ui-selectors {
		flex-grow: 1;
	}
	#vtbot-ui-selectors hr {
		border-color: #888;
	}

	#vtbot-ui-panel > div > *:first-child {
		margin-top: 0;
	}
	#vtbot-ui-selectors h4.visible::after {
		content: ' (visible)';
		color: darkolivegreen;
	}
	#vtbot-ui-selectors h4.invisible::after {
		content: ' (invisible)';
		color: darkgoldenrod;
	}

	#vtbot-ui-selectors p {
		width: 100%;
		white-space: nowrap;
		overflow-x: auto;
	}
	#vtbot-ui-modi {
		display: flex;
		flex-direction: column;
	}
	#vtbot-ui-modi ul {
		padding-right: 8px;
		padding-left: 0px;
		margin-right: 8px;
		margin-left: 0px;
		list-style-type: none;
	}
	#vtbot-ui-modi li {
		margin-bottom: 8px;
	}
	:root:not(.vtbot-ui-column) #vtbot-ui-panel ~ button {
		/*	bottom: calc(var(--vtbot-panel-height, 204px) - 14px);*/
		bottom: 6px;
	}
	#vtbot-ui-panel {
		background-color: #4861;
		accent-color: darkolivegreen;
		scrollbar-gutter: stable;
		display: flex;
		flex-direction: row;
		font-family: sans-serif;
		font-size: 12px;
		width: 100vw;
		height: var(--vtbot-panel-height, 204px);
		margin: 0px;
		min-height: fit-content;
		border: 0px solid red;
		overflow: auto;
		box-sizing: border-box;
	}
	:root.vtbot-ui-column {
		#vtbot-ui-panel {
			flex-direction: column;
			height: 100vh;
			width: var(--vtbot-panel-width, 183px);
		}
		.horizontal {
			display: none;
		}
	}
	:root:not(.vtbot-ui-column) {
		.vertical {
			display: none;
		}
	}

	:root:has(#vtbot-ui-names li.selected) #vtbot-ui-messages {
		display: none;
	}
	#vtbot-ui-info {
		display: none;
	}
	:root:has(#vtbot-ui-names li.selected) #vtbot-ui-info {
		display: block;
	}
	:root:not([data-vtbot-modus='compare']) #vtbot-ui-filter ul {
		display: none;
	}
	:root:not([data-vtbot-modus='slow-motion']) #vtbot-ui-slow-motion {
		display: none;
	}
	:root:not([data-vtbot-modus='control']) #vtbot-ui-control {
		display: none;
	}

	input[type='range'] {
		width: calc(100% - 16px);
		margin: 8px;
	}
</style>
