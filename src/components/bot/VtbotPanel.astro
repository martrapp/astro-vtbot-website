---
import snail from './mono-snail.url?raw';
import hslider from './mono-h-sliders.url?raw';
import vslider from './mono-v-sliders.url?raw';
import off from './mono-off.url?raw';
import sbs from './mono-side-by-side.url?raw';
import play from './mono-play.url?raw';
---

<button id="vtbot-ui-control-play"><img style="transform: scale(1.5)" src={play} /></button>
<div id="vtbot-ui-panel">
	<div id="vtbot-ui-messages" style="view-transition-name: vtbot-div-messages">
		<h4>You are &hellip;</h4>
		<p>
			&hellip; in the <b>Engine Room</b><img style="width:4em; float:right" src="/favicon.svg" /> deep
			down at the bottom of <b>The Bag!</b>
		</p>
		<p>
			<b>Select a mode</b> from <code>Bypass</code> (= no interception), <code>Slow Motion</code>, <code
				>Full Control</code
			> or <code>Side-by-side Comparison</code>.
		</p>
		<p>
			<b>Examine</b> the defined transitions, then <b>navigate</b> by clicking a link on your page.
		</p>
		<p>
			Selecting an element with a view transition name copies its selector to the clipboard, ready
			for pasting into the DevTools console.
		</p>
		<p>
			Active view transitions show an <span style="color: darkgoldenrod"
				>indicator (<img style="transform:translateY(0.4em)" src={play} />)</span
			>. Clicking it ends the transition.
		</p>
		<p>
			View transitions are also canceled when the <a
				href="https://github.com/w3c/csswg-drafts/issues/8045">size or orientation</a
			> of the window changes.
		</p>
		<p style="margin-bottom:0">You can resize this panel by dragging the border.</p>
	</div>

	<div id="vtbot-ui-modi" style="view-transition-name: vtbot-div-modi">
		<h4>Select Mode:</h4>
		<ul>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-bypass" /><label for="vtbot-m-bypass"
					><span style="display: inline-block; width:7em; padding-left: 0.7em"> Bypass</span><img
						style="transform: scale(1.5) translateY(1px)"
						src={off}
					/></label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-slow-motion" /><label
					for="vtbot-m-slow-motion"
					><span style="display: inline-block; width:7em; padding-left: 0.7em">
						Slow Motion</span
					><img style="transform: scale(1.5)" src={snail} /></label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-m-rg" id="vtbot-m-control" /><label for="vtbot-m-control"
					><span style="display: inline-block; width:6.7em; padding-left: 0.7em">
						Full Control</span
					>
					<img class="horizontal" style="transform: scale(1.5)" src={hslider} /><img
						class="vertical"
						style="transform: scale(1.5)"
						src={vslider}
					/></label
				>
			</li>
			<li>
				<input disabled type="radio" name="vtbot-m-rg" id="vtbot-m-compare" /><label
					for="vtbot-m-compare"
					><span style="color:#888; display: inline-block; width:7em; padding-left: 0.7em">
						Side-by-side</span
					><img style="transform: scale(1.5)" src={sbs} /></label
				>
			</li>
		</ul>
	</div>
	<div id="vtbot-ui-slow-motion" style="view-transition-name: vtbot-div-slo-mo">
		<h4>Slow Motion:</h4>
		<label for="vtbot-ui-slo-mo">Time stretch Factor: <span id="vtbot-ui-tsf">10.0</span></label><br
		/>
		<input
			id="vtbot-ui-slo-mo"
			data-vtbot-slow-motion="1.0"
			type="range"
			min="264"
			max="852"
			value="692"
		/>
		<div style="view-transition-name: vtbot-checkbox-styled">
			<input id="vtbot-ui-styled" type="checkbox" />
			<label for="vtbot-ui-styled">Highlight animations</label>
		</div>
	</div>
	<div id="vtbot-ui-control" style="view-transition-name: vtbot-div-control">
		<h4>Full Control:</h4>
		<p id="vtbot-ui-control-hint">Start a transition to activate sliders</p>
		<label for="vtbot-ui-controller">Marked animations:</label>
		<span id="vtbot-ui-progress">0</span> ms<br />
		<input type="range" id="vtbot-ui-controller" min="0" max="100" value="0" />
		<div style="display:flex; justify-content: space-between">
			<span>0</span><span id="vtbot-ui-controller-max">100%</span>
		</div><br />
		<label for="vtbot-ui-controller2">Other animations:</label>
		<span id="vtbot-ui-progress2">0</span> ms<br />
		<input type="range" id="vtbot-ui-controller2" min="0" max="100" value="0" />
		<button id="vtbot-ui-control-exit">Exit</button>
	</div>
	<div id="vtbot-ui-names" style="view-transition-name: vtbot-div-names">
		<h4>Elements w/ View Transition Names</h4>
		<ol>
			<li>Name 1</li>
			<li>Name 2</li>
			<li class="left">Name 3</li>
			<li class="right selected">Name 2</li>
			<li class="left right">Name 3</li>
			<li>Name 2</li>
		</ol>
		<button>Reset</button>
	</div>
	<div id="vtbot-ui-filter" style="view-transition-name: vtbot-div-filter">
		<h4>Filter Names:</h4>
		<ul>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-all" checked /><label for="vtbot-c-all"
					>Show all names</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-left" /><label for="vtbot-c-left"
					>Only on the left</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-right" /><label for="vtbot-c-right"
					>Only on the right</label
				>
			</li>
			<li>
				<input type="radio" name="vtbot-c-rg" id="vtbot-c-both" /><label for="vtbot-c-both"
					>On both pages</label
				>
			</li>
		</ul>
		<form style="view-transition-name: narrow">
			<label for="narrow">Narrow to:</label><br /><input
				id="narrow"
				type="text"
				placeholder="Fragment"
			/>
		</form>
		<button>Reset</button>
	</div>

	<div id="vtbot-ui-info" style="view-transition-name: vtbot-div-info"></div>
</div>
<button
	id="vtbot-ui-light-dark"
	style="view-transition-name: vtbot-button-mode"
	onclick="document.querySelector('#vtbot-main-frame').contentDocument.documentElement.style.colorScheme = (document.documentElement.style.colorScheme = document.documentElement.style.colorScheme === 'dark' ? 'light' : 'dark')"
	>â—‘</button
>
<button id="vtbot-ui-turn" style="view-transition-name: vtbot-button-turn">â‡²</button>
<button
	id="vtbot-ui-close"
	onclick="window.location.reload()"
	style="view-transition-name: vtbot-button-close">ðŸ—™</button
>
<style is:inline>
	:root {
		transition: color 1s;
	}

	#vtbot-ui-panel {
		--vtbot-name-border-width: 12px;
	}
	#vtbot-ui-panel ~ button {
		border-radius: 6px;
		border: 0;
		margin: 0;
		position: fixed;
		color: white;
		background-color: darkolivegreen;
	}
	#vtbot-ui-panel ~ #vtbot-ui-close {
		padding-bottom: 4pt;
		cursor: pointer;
		right: 11px;
		background-color: darkgoldenrod;
	}
	#vtbot-ui-turn {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 40px;
		color: white;
	}

	#vtbot-ui-light-dark {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 67px;
		color: white;
	}

	#vtbot-ui-panel > div {
		padding: 8px;
		margin: 4px;
		border: 1px solid #888;
		min-width: 150px;
	}
	#vtbot-ui-messages {
		min-height: 120px;
		font-family: monospace;
		hyphens: auto;
	}
	#vtbot-ui-messages {
		overflow-y: auto;
	}

	:root:not(.vtbot-ui-column) #vtbot-ui-panel > div {
		min-height: 160px;
	}
	#vtbot-ui-panel div.hidden {
		display: none;
	}

	#vtbot-ui-names,
	#vtbot-ui-filter,
	#vtbot-ui-control {
		position: relative;
	}
	#vtbot-ui-control button,
	#vtbot-ui-names button,
	#vtbot-ui-filter button {
		cursor: pointer;
		padding-bottom: 3pt;
		border: 1px solid #888;
		margin: 0;
		position: absolute;
		top: 0;
		right: 0;
		border-bottom-left-radius: 6px;
	}
	:root.vtbot-vt-active #vtbot-ui-control-hint {
		display: none;
	}

	#vtbot-ui-names {
		display: flex;
		flex-direction: column;
	}

	#vtbot-ui-messages ol {
		padding-left: 16pt;
	}
	#vtbot-ui-names ol {
		border: 1pt dashed grey;
		padding-right: 0px;
		padding-left: 0px;
		margin: 8px;
		overflow-y: auto;
		width: calc(100% - 8px);
		flex-grow: 1;
		list-style-type: none;
	}
	#vtbot-ui-names ol li {
		cursor: pointer;
		padding: 2pt 8pt;
		border-left: var(--vtbot-name-border-width) solid transparent;
		border-right: var(--vtbot-name-border-width) solid transparent;
	}
	#vtbot-ui-names ol li.left {
		border-left: var(--vtbot-name-border-width) solid darkolivegreen;
	}
	#vtbot-ui-names ol li.left.invis {
		border-left: var(--vtbot-name-border-width) solid darkgoldenrod;
	}
	#vtbot-ui-names ol li.right {
		border-right: var(--vtbot-name-border-width) solid darkolivegreen;
	}
	#vtbot-ui-names ol li.right.invis {
		border-right: var(--vtbot-name-border-width) solid darkgoldenrod;
	}

	#vtbot-ui-names ol li.selected {
		background-color: olive;
	}
#vtbot-ui-names ol li.invis {
	color:#888
}
	#vtbot-ui-filter ul {
		list-style-type: none;
		margin: 8px 0 8px 0;
		padding-left: 0;
	}
	#vtbot-ui-filter ul label {
		margin-left: 8px;
		margin-right: 8px;
	}
	#vtbot-ui-filter > label {
		margin-left: 5px;
	}
	#vtbot-ui-filter input[type='text'] {
		margin-top: 5px;
		width: 10em;
	}
	#vtbot-ui-filter input[type='text']:not(:placeholder-shown) {
		border: 1pt solid darkgoldenrod;
	}

	#vtbot-ui-panel > div > *:first-child {
		margin-top: 0;
	}

	#vtbot-ui-modi {
		display: flex;
		flex-direction: column;
	}
	#vtbot-ui-modi ul {
		padding-right: 8px;
		padding-left: 0px;
		margin: 8px 0 8px 0;
		list-style-type: none;
	}
	#vtbot-ui-modi li {
		margin-bottom: 8px;
	}
	:root:not(.vtbot-ui-column) #vtbot-ui-panel ~ button {
		/*	bottom: calc(var(--vtbot-panel-height, 204px) - 14px);*/
		bottom: 6px;
	}
	#vtbot-ui-panel {
		background-color: #4861;
		accent-color: darkolivegreen;
		scrollbar-gutter: stable;
		display: flex;
		flex-direction: row;
		font-family: sans-serif;
		font-size: 12px;
		width: 100vw;
		height: var(--vtbot-panel-height, 204px);
		margin: 0px;
		min-height: fit-content;
		border: 0px solid red;
		overflow: auto;
		box-sizing: border-box;
	}
	:root.vtbot-ui-column {
		#vtbot-ui-panel {
			flex-direction: column;
			height: 100vh;
			width: var(--vtbot-panel-width, 188px);
		}
		.horizontal {
			display: none;
		}
	}
	:root:not(.vtbot-ui-column) {
		.vertical {
			display: none;
		}
	}

	#vtbot-ui-info:empty {
		display: none;
	}
	:root:not([data-vtbot-modus='slow-motion']) #vtbot-ui-slow-motion {
		display: none;
	}
	:root:not([data-vtbot-modus='control']) #vtbot-ui-control {
		display: none;
	}

	input[type='range'] {
		width: calc(100% - 16px);
		margin: 8px;
	}

	h4 {
		margin-bottom: 8pt;
	}
	#vtbot-ui-control-play {
		display: none;
	}
	:root.vtbot-vt-active #vtbot-ui-control-exit {
		background-color: darkgoldenrod;
		color: white;
	}
	:root.vtbot-vt-active #vtbot-ui-control-play {
		display: block;
		position: fixed;
		left: 0;
		top: 0;
	}
	:root.vtbot-vt-active h4 {
		color: darkgoldenrod;
	}

	.vtbot-highlight:hover {
		background-color: #859b5f66;
	}
</style>
