---
title: The Jotter on Starlight
---

At some point I realized that I needed to structure my bits & pieces better and make them searchable to make them useful.

 The desire to add view transitions to Starlight is a logical, but not trivial venture. Others have done it before. Chapeau @Fryuni! What you see here is a mere tech demo.

Starlight does a great job of supporting documentation sites. You really don't need view transitions on a documentation site to distract your audience from the content *unless you are a site about view transitions*. Starlight is an opinionated framework. It works best when you use it as it is intended and only customize what is designated to be customized.

Supporting view transitions for Starlight is not just about cross-fade navigation. There is a wide range of design options. Everyone has different preferences.

## Will The Bag offer Components?

Might be, but not sure yet. It depends on how useful reusable components can be and how stable the solutions would be. In the best of all worlds, The Bag can provide small, independent gadgets that developers can combine to their liking. Keep your fingers crossed ;-) and stay tuned.

## Features
For now I just sketch what I did for this site:

### Compulsory

The minimum change you need to make is to add Astro's `<ViewTransitions />` component to the component `<Head>`. As usual,  you than have to understand how what functions have to be re-run on soft load to get the effects of the former full page load.

#### Theme Pickers
You could start with running `StarlightThemeProvider.updatePickers` on `astro:page-load` with `localStorage.getItem("starlight-theme") || "auto"` to make the dark mode toggle work with view transitions.

#### ReplacementSwap
I decided otherwise and opted to use the Bag's  [`ReplacementSwap`](/library/ReplacementSwap/) component with `rootAttributesToPreserve="data-theme"` to replace the `.main-frame` div in each navigation.

#### Sidebar Navigation
You than need some support to dynamically update the sidebar navigation.

#### Auto-close Mobile Sidebar
For mobile devices you need to automatically close the overlay once the user picked another page from the page navigation.

### Optional Part

Some things are truly optional.

#### Styling
You might want to add some animations to make the main content change look more interesting.

#### Additional Image Pairs
I also gave the page headings view transition names to make the whole thing even more entertaining.

#### Loading Indicator
Next, you need a [loading indicator](/library/LoadingIndicator) to show that the website has recognized the click and is doing something.

#### OrderedPages
Starlight sites can be configured to show previous and next page links on the bottom of each page. The directions here mean: In the order of appearance in the page navigation. Wouldn't it be cool if the view transition animation would also use these directions? Did that.

#### Scroll Pseudo Images
If you have long pages, view transitions cause a lot of ["scrolling"](/jotter/api/#scroll) when you navigate them from a scrolled down position. You know that this is no scrolling but just the morph animation of two large, only partially visible objects. The effect is less confusing, if you scroll both pages to the top before the morphing starts.

#### ReloadFence
The next thing I added was a fence that detects when I leave the Starlight realm and navigate to the demo and component pages of the site (and vice versa).  On those navigation events I replace view transitions with full page loads to reinitialize state, e.g. the search.


### Minors

The world will keep turning without those:

#### Ignore Linter Warnings
The Bag's [Linter](/library/Linter/) warns when it finds identifiers for scoped styles that are defined but not used. This might point to persisted elements that lost their styling during copying. But there can be other reasons, too. For Starlight sites, the Linter regularly reports false positives for optional components like Banners and Fallbacks.

As the Linter component generates its warnings only in DEV mode, this is not a problem for production.

#### SilentCatch

When clicking fast, or quickly navigating through the browser history with the arrow keys, you interrupt ongoing transitions. This leads to error messages in the browser console as you typically would not have cared to check for promises that might reject. Better catch.

#### SwapSound

Can't simply do without an annoying sound whenever the view transition runs. This is the audio equivalent to a page animation. Choose from different Swoops! Or how about a loud clockwork sound as the inner gear wheels turn and click?



