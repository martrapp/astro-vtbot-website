---
import snail from './mono-snail.url?raw';
import hslider from './mono-h-sliders.url?raw';
import vslider from './mono-v-sliders.url?raw';
import sbs from './mono-side-by-side.url?raw';
import off from './mono-off.url?raw';
import play from './mono-play.url?raw';
---

<button id="vtbag-ui-control-play"><img style="transform: scale(1.5)" src={play} /></button>
<div id="vtbag-ui-panel">
	<div id="vtbag-ui-messages" style="view-transition-name: vtbag-div-messages">
		<h4>You are &hellip;</h4>
		<p>
			&hellip; in the <b>Inspection Chamber</b> deep down at the bottom of <b>The Bag!</b>
		</p>
		<p>
			<b>Select a mode</b> from <code>Bypass</code> (= no interception), <code>Slow Motion</code>, <code
				>Full Control</code
			> or <code>Side-by-side Comparison</code>.
		</p>
		<p>
			<b>Examine</b> the defined transitions by clicking on there names or selecting the highlight toggle, then <b>navigate</b> by clicking a link on your page.
		</p>
		<p>
			Selecting an element with a view transition name copies its selector to the clipboard, ready
			for pasting into the console of the browser's Developer tools.
		</p>
		<p>
			Active view transitions show an <span style="color: darkgoldenrod"
				>indicator (<img style="transform:translateY(0.4em)" src={play} />)</span
			> in the top left corner of the viewport. Clicking it ends the transition.
		</p>
		<p>
			View transitions are also canceled when the <a
				href="https://github.com/w3c/csswg-drafts/issues/8045">size or orientation</a
			> of the window changes.
		</p>
		<p style="margin-bottom:0">You can resize this panel by dragging the border.</p>
	</div>

	<div id="vtbag-ui-modi" style="view-transition-name: vtbag-div-modi">
		<h4>Select Mode:</h4>
		<ul>
			<li>
				<input type="radio" name="vtbag-m-rg" id="vtbag-m-bypass" /><label for="vtbag-m-bypass"
					><span style="display: inline-block; width:7em; padding-left: 0.7em"> Bypass</span><img
						style="transform: scale(1.5) translateY(1px)"
						src={off}
					/></label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-m-rg" id="vtbag-m-slow-motion" /><label
					for="vtbag-m-slow-motion"
					><span style="display: inline-block; width:7em; padding-left: 0.7em">
						Slow Motion</span
					><img style="transform: scale(1.5)" src={snail} /></label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-m-rg" id="vtbag-m-control" /><label for="vtbag-m-control"
					><span style="display: inline-block; width:6.7em; padding-left: 0.7em">
						Full Control</span
					>
					<img class="horizontal" style="transform: scale(1.5)" src={hslider} /><img
						class="vertical"
						style="transform: scale(1.5)"
						src={vslider}
					/></label
				>
			</li>
			<li>
				<input disabled type="radio" name="vtbag-m-rg" id="vtbag-m-compare" /><label
					for="vtbag-m-compare"
					><span
						title="Coming soon!"
						style="color:#888; display: inline-block; width:7em; padding-left: 0.7em"
					>
						Side-by-side</span
					><img style="transform: scale(1.5)" src={sbs} /></label
				>
			</li>
		</ul>
	</div>
	<div id="vtbag-ui-slow-motion" style="view-transition-name: vtbag-div-slo-mo">
		<h4>Slow Motion:<span id="vtbag-ui-slo-mo-progress"></span></h4>
		<label for="vtbag-ui-slo-mo">Time stretch Factor: <span id="vtbag-ui-tsf">10.0</span></label><br
		/>
		<input
			id="vtbag-ui-slo-mo"
			data-vtbag-slow-motion="1.0"
			type="range"
			min="264"
			max="852"
			value="692"
		/>
		<div style="view-transition-name: vtbag-checkbox-styled">
			<input id="vtbag-ui-styled" type="checkbox" />
			<label for="vtbag-ui-styled">Highlight groups</label>
		</div>
	</div>
	<div id="vtbag-ui-control" style="view-transition-name: vtbag-div-control">
		<h4>Full Control:</h4>
		<p id="vtbag-ui-control-hint">Start a transition to activate</p>
		<p id="vtbag-ui-control-hint2">Select animations, then &hellip;</p>
		<label for="vtbag-ui-controller2">Unselected: </label><span id="vtbag-ui-progress2">0</span> ms<br
		/>
		<input type="range" id="vtbag-ui-controller2" min="0" max="100" value="0" />
		<div style="display:flex; justify-content: space-between; transform: translateY(-10px)">
			<span>0</span><span id="vtbag-ui-controller-max">100%</span>
		</div>
		<label for="vtbag-ui-controller">Selected:</label>
		<span id="vtbag-ui-progress">0</span> ms<br />
		<input type="range" id="vtbag-ui-controller" min="0" max="100" value="0" />
		<button id="vtbag-ui-control-exit">Exit</button>
	</div>
	<div id="vtbag-ui-names" style="view-transition-name: vtbag-div-names">
		<h4>Elements w/ View Transition Names</h4>
		<div style="display:none; justify-content: space-between">
			<span>old</span><span
				><input id="vtbag-ui-visible-only" type="checkbox" checked /><label
					for="vtbag-ui-visible-only">in viewport</label
				></span
			><span>new</span>
		</div>
		<ol title="Select names\n(During transition:\nClick colored patches to hides images)">
			<li>Name 1</li>
		</ol>
		<button title="Reset selection">Reset</button>
	</div>
	<div id="vtbag-ui-filter" style="view-transition-name: vtbag-div-filter">
		<h4>Filter Names:</h4>
		<ul>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-all" checked /><label for="vtbag-c-all"
					><span style="color:var(--vtbag-background-accent)">â–ˆ</span><span
						style="color:var(--vtbag-background-accent)">â–ˆ</span
					> Show all names</label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-old" /><label for="vtbag-c-old"
					><span style="color:darkslateblue">â–ˆ</span><span
						style="color:var(--vtbag-background-accent)">â–ˆ</span
					> On old page</label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-new" /><label for="vtbag-c-new"
					><span style="color:var(--vtbag-background-accent)">â–ˆ</span><span
						style="color:darkolivegreen">â–ˆ</span
					> On new page</label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-old-only" /><label for="vtbag-c-old-only"
					><span style="color:darkslateblue">â–ˆ</span><span style="color:transparent">â–ˆ</span> Only on
					old page</label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-new-only" /><label for="vtbag-c-new-only"
					><span style="color:transparent">â–ˆ</span><span style="color:darkolivegreen">â–ˆ</span> Only on
					new page</label
				>
			</li>
			<li>
				<input type="radio" name="vtbag-c-rg" id="vtbag-c-both" /><label for="vtbag-c-both"
					><span style="color:darkslateblue">â–ˆ</span><span style="color:darkolivegreen">â–ˆ</span> On both
					pages</label
				>
			</li>
		</ul>
		<form style="view-transition-name: narrow">
			<label for="narrow">Narrow to:</label><br /><input
				id="narrow"
				type="text"
				placeholder="Fragment"
			/>
		</form>
		<button title="Reset filters">Reset</button>
	</div>

	<div id="vtbag-ui-info" style="view-transition-name: vtbag-div-info"></div>
</div>
<button
	id="vtbag-ui-light-dark"
	style="view-transition-name: vtbag-button-mode"
	title="Switch light/dark mode">â—‘</button
>
<button
	id="vtbag-ui-turn"
	title="Switch panel orientation\n(also cancels view transitions)"
	style="view-transition-name: vtbag-button-turn">â‡²</button
>
<button id="vtbag-ui-close" title="Close" style="view-transition-name: vtbag-button-close">ðŸ—™</button
>
<style is:inline>
	#vtbag-ui :where(*, ::before, ::after) {
		box-sizing: border-box;
	}
	#vtbag-ui * {
		margin: 0;
		padding: 0;
	}

	#vtbag-ui
		:where(
			article,
			aside,
			details,
			figcaption,
			figure,
			footer,
			header,
			hgroup,
			main,
			menu,
			nav,
			section
		) {
		display: block;
	}
	#vtbag-ui :where(ol, ul) {
		list-style: none;
	}

	#vtbag-ui img {
		border-style: none;
	}

	#vtbag-ui :where(button, input, optgroup, select, textarea) {
		font-family: inherit;
		font-size: 100%;
		line-height: 1.15;
		margin: 0;
	}

	:root {
		transition: color 1s;
	}

	img {
		display: inline-block;
	}
	button {
		padding-left: 6px;
		padding-right: 6px;
	}
	#vtbag-ui-panel {
		--vtbag-name-border-width: 20px;
	}
	#vtbag-ui-panel ~ button {
		border-radius: 6px;
		border: 0;
		margin: 0;
		position: fixed;
		color: white;
		background-color: darkolivegreen;
	}
	:root.vtbag-vt-active #vtbag-ui-panel ~ #vtbag-ui-turn {
		background-color: darkgoldenrod;
	}
	#vtbag-ui-panel ~ #vtbag-ui-close {
		padding-bottom: 4pt;
		cursor: pointer;
		right: 11px;
		background-color: darkgoldenrod;
	}
	#vtbag-ui-turn {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 40px;
		color: white;
	}

	#vtbag-ui-light-dark {
		padding-top: 4pt;
		padding-bottom: 2pt;
		cursor: pointer;
		right: 67px;
		color: white;
	}

	#vtbag-ui-panel > div {
		padding: 8px;
		margin: 4px;
		border: 1px solid #888;
		min-width: 150px;
	}
	#vtbag-ui-messages {
		min-height: 120px;
		font-family: monospace;
		hyphens: auto;
		flex-grow: 1;
	}
	#vtbag-ui-messages {
		overflow-y: auto;
	}

	:root:not(.vtbag-ui-column) #vtbag-ui-panel > div {
		min-height: 160px;
	}
	#vtbag-ui-panel div.hidden {
		display: none;
	}

	#vtbag-ui-names,
	#vtbag-ui-filter,
	#vtbag-ui-control {
		position: relative;
	}
	#vtbag-ui-control button,
	#vtbag-ui-names button,
	#vtbag-ui-filter button {
		cursor: pointer;
		padding-bottom: 3pt;
		border: 1px solid #888;
		margin: 0;
		position: absolute;
		top: 0;
		right: 0;
		border-bottom-left-radius: 6px;
	}
	#vtbag-ui-control-hint {
		color: goldenrod;
	}
	#vtbag-ui-control-hint2,
	:root.vtbag-vt-active #vtbag-ui-control-hint {
		display: none;
	}
	:root.vtbag-vt-active #vtbag-ui-control-hint2 {
		display: block;
	}
	#vtbag-ui-controller,
	#vtbag-ui-controller2 {
		accent-color: #888888;
		cursor: not-allowed;
		pointer-events: none;
	}
	:root.vtbag-vt-active #vtbag-ui-controller,
	:root.vtbag-vt-active #vtbag-ui-controller2 {
		cursor: unset;
		pointer-events: unset;
		accent-color: unset;
	}

	#vtbag-ui-messages ol {
		padding-left: 16pt;
	}

	#vtbag-ui-names {
		display: flex;
		flex-direction: column;
	}

	#vtbag-ui-names ol {
		border: 1pt dashed grey;
		padding-right: 0px;
		padding-left: 0px;
		margin: 8px;
		overflow-y: auto;
		width: calc(100% - 8px);
		flex-grow: 1;
		list-style-type: none;
	}
	#vtbag-ui-names ol li {
		cursor: pointer;
		padding: 2pt 8pt;
		border-left: var(--vtbag-name-border-width) solid transparent;
		border-right: var(--vtbag-name-border-width) solid transparent;
	}
	#vtbag-ui-names ol li.old {
		border-left: var(--vtbag-name-border-width) solid darkslateblue;
	}
	#vtbag-ui-names li {
		position: relative;
		margin-bottom: 1px;
	}

	#vtbag-ui-names li.old-hidden::before {
		top: 50%;
		transform: scale(0.9) translateY(-50%);
		left: -18px;
		display: inline;
		content: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImRhcmtnb2xkZW5yb2QiIGQ9Ik0yIDUuMjdMMy4yOCA0TDIwIDIwLjcyTDE4LjczIDIybC0zLjA4LTMuMDhjLTEuMTUuMzgtMi4zNy41OC0zLjY1LjU4Yy01IDAtOS4yNy0zLjExLTExLTcuNWMuNjktMS43NiAxLjc5LTMuMzEgMy4xOS00LjU0ek0xMiA5YTMgMyAwIDAgMSAzIDNhMyAzIDAgMCAxLS4xNyAxTDExIDkuMTdBMyAzIDAgMCAxIDEyIDltMC00LjVjNSAwIDkuMjcgMy4xMSAxMSA3LjVhMTEuOCAxMS44IDAgMCAxLTQgNS4xOWwtMS40Mi0xLjQzQTkuODYgOS44NiAwIDAgMCAyMC44MiAxMkE5LjgyIDkuODIgMCAwIDAgMTIgNi41Yy0xLjA5IDAtMi4xNi4xOC0zLjE2LjVMNy4zIDUuNDdjMS40NC0uNjIgMy4wMy0uOTcgNC43LS45N00zLjE4IDEyQTkuODIgOS44MiAwIDAgMCAxMiAxNy41Yy42OSAwIDEuMzctLjA3IDItLjIxTDExLjcyIDE1QTMuMDY0IDMuMDY0IDAgMCAxIDkgMTIuMjhMNS42IDguODdjLS45OS44NS0xLjgyIDEuOTEtMi40MiAzLjEzIi8+PC9zdmc+');
		position: absolute;
	}
	#vtbag-ui-names li.new-hidden::after {
		top: 50%;
		transform: scale(0.9) translateY(-50%);
		right: -18px;
		content: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGZpbGw9ImRhcmtnb2xkZW5yb2QiIGQ9Ik0yIDUuMjdMMy4yOCA0TDIwIDIwLjcyTDE4LjczIDIybC0zLjA4LTMuMDhjLTEuMTUuMzgtMi4zNy41OC0zLjY1LjU4Yy01IDAtOS4yNy0zLjExLTExLTcuNWMuNjktMS43NiAxLjc5LTMuMzEgMy4xOS00LjU0ek0xMiA5YTMgMyAwIDAgMSAzIDNhMyAzIDAgMCAxLS4xNyAxTDExIDkuMTdBMyAzIDAgMCAxIDEyIDltMC00LjVjNSAwIDkuMjcgMy4xMSAxMSA3LjVhMTEuOCAxMS44IDAgMCAxLTQgNS4xOWwtMS40Mi0xLjQzQTkuODYgOS44NiAwIDAgMCAyMC44MiAxMkE5LjgyIDkuODIgMCAwIDAgMTIgNi41Yy0xLjA5IDAtMi4xNi4xOC0zLjE2LjVMNy4zIDUuNDdjMS40NC0uNjIgMy4wMy0uOTcgNC43LS45N00zLjE4IDEyQTkuODIgOS44MiAwIDAgMCAxMiAxNy41Yy42OSAwIDEuMzctLjA3IDItLjIxTDExLjcyIDE1QTMuMDY0IDMuMDY0IDAgMCAxIDkgMTIuMjhMNS42IDguODdjLS45OS44NS0xLjgyIDEuOTEtMi40MiAzLjEzIi8+PC9zdmc+');
		position: absolute;
	}
	#vtbag-ui-names ol li.old-invisible {
		border-left: var(--vtbag-name-border-width) solid darkgoldenrod;
	}
	#vtbag-ui-names ol li.new {
		border-right: var(--vtbag-name-border-width) solid darkolivegreen;
	}
	#vtbag-ui-names ol li.new-invisible {
		border-right: var(--vtbag-name-border-width) solid darkgoldenrod;
	}

	#vtbag-ui-names ol li.selected {
		background-color: var(--vtbag-background-accent);
	}
	:root.vtbag-vt-active #vtbag-ui-names li.invisible {
		color: #888;
	}

	:root.vtbag-vt-active #vtbag-ui-names:has(input:checked) li.invisible {
		border-top: 1pt dotted grey;
		font-size: 0;
		padding: 0;
	}
	#vtbag-ui-filter ul {
		list-style-type: none;
		margin: 8px 0 8px 0;
		padding-left: 0;
	}
	#vtbag-ui-filter ul label {
		margin-left: 8px;
		margin-right: 8px;
	}
	#vtbag-ui-filter > label {
		margin-left: 5px;
	}
	#vtbag-ui-filter input[type='text'] {
		margin-top: 5px;
		width: 10em;
	}
	#vtbag-ui-filter input[type='text']:not(:placeholder-shown) {
		border: 1pt solid darkgoldenrod;
	}

	#vtbag-ui-panel > div > *:first-child {
		margin-top: 0;
	}

	#vtbag-ui-modi {
		display: flex;
		flex-direction: column;
	}
	#vtbag-ui-modi ul {
		padding-right: 8px;
		padding-left: 0px;
		margin: 8px 0 8px 0;
		list-style-type: none;
	}
	#vtbag-ui-modi li {
		margin-bottom: 8px;
	}
	:root:not(.vtbag-ui-column) #vtbag-ui-panel ~ button {
		/*	bottom: calc(var(--vtbag-panel-height, 226px) - 14px);*/
		bottom: 6px;
	}
	#vtbag-ui-panel {
		background-color: #4861;
		accent-color: darkolivegreen;
		scrollbar-gutter: stable;
		display: flex;
		flex-direction: row;
		font-family: sans-serif;
		font-size: 12px;
		width: 100vw;
		height: var(--vtbag-panel-height, 226px);
		margin: 0px;
		min-height: fit-content;
		border: 0px solid red;
		overflow: auto;
		box-sizing: border-box;
	}
	:root.vtbag-ui-column {
		#vtbag-ui-panel {
			flex-direction: column;
			height: 100vh;
			width: var(--vtbag-panel-width, 200px);
		}
		.horizontal {
			display: none;
		}
	}
	:root:not(.vtbag-ui-column) {
		.vertical {
			display: none;
		}
	}

	#vtbag-ui-info:empty {
		display: none;
	}
	:root:not([data-vtbag-modus='slow-motion']) #vtbag-ui-slow-motion {
		display: none;
	}
	:root:not([data-vtbag-modus='control']) #vtbag-ui-control {
		display: none;
	}

	input[type='range'] {
		width: calc(100% - 16px);
		margin: 8px;
	}

	h4 {
		margin-bottom: 8pt;
	}
	#vtbag-ui-control-play {
		display: none;
	}
	:root.vtbag-vt-active #vtbag-ui-control-exit {
		background-color: darkgoldenrod;
		color: white;
	}
	:root.vtbag-vt-active #vtbag-ui-control-play {
		display: block;
		position: fixed;
		left: 0;
		top: 0;
		z-index: 1000;
	}
	:root.vtbag-vt-active h4 {
		color: darkgoldenrod;
	}

	.vtbag-highlight:hover {
		background-color: #859b5f66;
	}
</style>
